# VR多設備視頻播放系統 - 快速測試指南

## 🚀 快速開始

### 1. 啟動系統
```bash
# 使用啟動腳本（推薦）
./start-vr-system.sh

# 或手動啟動
cd server && npm start &
cd .. && npm run dev
```

### 2. 訪問系統
- **前端**: http://localhost:3000
- **後端**: http://localhost:5001
- **後端狀態**: http://localhost:5001/status

## 🧪 功能測試

### 測試1: 後端服務狀態
```bash
# 檢查後端是否運行
curl http://localhost:5001/health

# 檢查系統狀態
curl http://localhost:5001/status
```

**預期結果**: 返回JSON格式的健康狀態和系統信息

### 測試2: 控制器模式
1. 打開瀏覽器訪問 http://localhost:3000
2. 點擊"VR多設備視頻播放"
3. 點擊"創建新會話"
4. 檢查是否生成會話代碼和QR碼

**預期結果**: 成功創建會話，顯示會話代碼和QR碼

### 測試3: 設備連接模擬
1. 在控制器頁面，點擊"添加設備"
2. 選擇"Wi-Fi掃描"選項卡
3. 點擊"開始Wi-Fi掃描"
4. 檢查掃描進度和結果

**預期結果**: 掃描完成，顯示網絡狀態和掃描結果

### 測試4: 用戶模式
1. 在手機瀏覽器中訪問 http://localhost:3000
2. 點擊"VR視頻觀看器"
3. 輸入會話代碼（從控制器獲取）
4. 點擊"加入會話"

**預期結果**: 成功加入會話，顯示設備信息

### 測試5: 視頻同步
1. 在控制器端播放視頻
2. 檢查用戶端是否收到同步信號
3. 測試播放、暫停、停止功能

**預期結果**: 用戶端視頻與控制器同步播放

## 🔧 故障排除

### 問題1: 後端無法啟動
```bash
# 檢查端口是否被佔用
lsof -i :5001

# 檢查Node.js版本
node --version

# 檢查依賴是否安裝
cd server && npm list
```

### 問題2: 前端無法連接後端
```bash
# 檢查CORS設置
curl -H "Origin: http://localhost:3000" http://localhost:5001/health

# 檢查網絡連接
ping localhost
```

### 問題3: 設備無法發現
```bash
# 檢查網絡配置
ifconfig | grep "inet "

# 檢查防火牆設置
sudo ufw status
```

### 問題4: Socket.io連接失敗
```bash
# 檢查WebSocket支持
curl -I -H "Connection: Upgrade" -H "Upgrade: websocket" http://localhost:5001

# 檢查瀏覽器控制台錯誤
# 按F12打開開發者工具，查看Console標籤
```

## 📱 移動設備測試

### iOS設備
1. 確保在同一Wi-Fi網絡
2. 使用Safari瀏覽器
3. 允許相機權限（QR碼掃描）

### Android設備
1. 確保在同一Wi-Fi網絡
2. 使用Chrome瀏覽器
3. 允許相機權限（QR碼掃描）

### 常見移動端問題
- **相機權限**: 在瀏覽器設置中允許相機訪問
- **網絡問題**: 檢查Wi-Fi連接和防火牆設置
- **瀏覽器兼容性**: 使用最新版本的Chrome或Safari

## 🎯 性能測試

### 連接測試
```bash
# 測試多設備同時連接
# 打開多個瀏覽器標籤，模擬多個設備
```

### 同步測試
```bash
# 測試視頻同步延遲
# 使用秒表測量從控制器到用戶端的延遲
```

### 壓力測試
```bash
# 測試大量設備同時連接
# 使用腳本模擬多個設備連接
```

## 📊 監控和日誌

### 後端日誌
```bash
# 查看後端控制台輸出
# 包含連接、斷開、事件等日誌
```

### 前端日誌
```bash
# 打開瀏覽器開發者工具
# 查看Console標籤的日誌信息
```

### 網絡監控
```bash
# 使用瀏覽器Network標籤
# 監控WebSocket連接和HTTP請求
```

## 🚨 緊急情況

### 系統崩潰
```bash
# 停止所有服務
pkill -f "node.*socket-server"
pkill -f "next.*dev"

# 重新啟動
./start-vr-system.sh
```

### 端口衝突
```bash
# 查找佔用端口的進程
lsof -i :5001
lsof -i :3000

# 殺死進程
kill -9 <PID>
```