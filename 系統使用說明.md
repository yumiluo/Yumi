# 🚀 VR多設備視頻播放系統 - 使用說明

## 📋 系統概述

這是一個專為VR旅遊視頻設計的多設備同步播放系統，支持：
- 📱 手機和電腦同步播放YouTube 360°視頻
- 🔐 用戶註冊和登錄系統
- 🎯 會話創建和管理
- 📡 實時設備同步
- 🎮 控制器儀表板

## 🚀 快速啟動

### 方法1：使用修復版啟動腳本（推薦）
```bash
# 給腳本執行權限
chmod +x start-vr-fixed.sh

# 啟動系統
./start-vr-fixed.sh
```

### 方法2：手動啟動
```bash
# 終端1：啟動後端
cd server
npm start

# 終端2：啟動前端
npm run dev
```

## 🌐 訪問地址

- **前端界面**: http://localhost:3000
- **後端API**: http://localhost:5001
- **健康檢查**: http://localhost:5001/api/health

## 📱 使用步驟

### 1. 創建帳戶
1. 打開 http://localhost:3000
2. 點擊 "沒有帳戶？點擊註冊"
3. 輸入郵箱和密碼
4. 點擊註冊

### 2. 登錄系統
1. 使用註冊的郵箱和密碼登錄
2. 或點擊 "訪客模式" 直接進入

### 3. 進入VR控制器
1. 登錄後點擊 "VR多設備視頻播放"
2. 進入控制器儀表板

### 4. 創建會話
1. 點擊 "創建旅遊團"
2. 輸入旅遊主題（如：巴黎之旅）
3. 系統會生成會話ID和加入代碼
4. 顯示QR碼供手機掃描

### 5. 手機加入會話
1. 手機訪問 http://localhost:3000
2. 點擊 "VR多設備視頻播放"
3. 輸入加入代碼或掃描QR碼
4. 成功加入會話

### 6. 同步播放
1. 在控制器端選擇YouTube 360°視頻
2. 點擊播放、暫停、停止等控制按鈕
3. 所有設備將同步播放

## 🔧 系統功能

### 設備管理
- **Wi-Fi掃描**: 自動發現同一網絡下的設備
- **設備連接**: 顯示設備型號和連接狀態
- **實時同步**: 所有設備實時同步播放狀態

### 會話管理
- **會話創建**: 創建新的旅遊團會話
- **會話加入**: 通過代碼或QR碼加入會話
- **會話同步**: 實時同步會話狀態

### 視頻控制
- **YouTube 360°**: 支持YouTube 360°視頻播放
- **同步控制**: 播放、暫停、停止、跳轉
- **時間同步**: 自動補償網絡延遲

## ⚠️ 注意事項

### 當前狀態
- ✅ 系統已修復並可正常運行
- ✅ 前後端服務正常啟動
- ✅ 用戶註冊和登錄功能正常
- ✅ 會話創建功能正常
- ⚠️ 目前使用內存存儲（數據庫表尚未創建）

### 數據庫配置
要啟用數據庫存儲，需要在Supabase Dashboard中創建以下表：
- `users` - 用戶表
- `sessions` - 會話表
- `devices` - 設備表
- `videos` - 視頻表

### 網絡要求
- 所有設備必須在同一Wi-Fi網絡下
- 端口3000和5001必須可訪問
- 防火牆需要允許這些端口的連接

## 🐛 故障排除

### 常見問題

#### 1. 端口被佔用
```bash
# 檢查端口佔用
lsof -i :3000
lsof -i :5001

# 關閉佔用進程
kill -9 <PID>
```

#### 2. 依賴安裝失敗
```bash
# 清理並重新安裝
rm -rf node_modules package-lock.json
npm install
```

#### 3. 後端啟動失敗
```bash
# 檢查後端日誌
cd server
node vr-server.js
```

#### 4. 前端無法訪問
```bash
# 檢查前端進程
ps aux | grep "next dev"
# 重新啟動前端
npm run dev
```

### 系統診斷
使用內建的系統診斷功能：
1. 在主頁面點擊 "系統診斷"
2. 檢查各項服務狀態
3. 根據提示修復問題

## 📞 技術支持

如果遇到問題：
1. 檢查終端錯誤日誌
2. 使用系統診斷功能
3. 確認網絡和端口配置
4. 重啟系統服務

## 🎯 下一步計劃

- [ ] 創建Supabase數據庫表
- [ ] 啟用持久化數據存儲
- [ ] 優化Wi-Fi掃描速度
- [ ] 添加更多視頻格式支持
- [ ] 實現離線模式

---

**🎉 享受你的VR旅遊體驗！**
